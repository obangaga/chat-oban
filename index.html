<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Oban AI - DeepSeek Gratis</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    :root {
      --primary: #6a11cb;
      --secondary: #2575fc;
      --accent: #00f2fe;
      --dark: #0f0a1e;
      --darker: #070416;
      --light: #f0f5ff;
      --error: #ff5252;
    }
    
    body {
      font-family: 'Roboto', sans-serif;
      color: var(--light);
      background: linear-gradient(135deg, var(--darker), var(--dark));
      min-height: 100vh;
      overflow-x: hidden;
      line-height: 1.6;
    }
    
    .overlay {
      padding: 30px 20px;
      max-width: 1000px;
      margin: 0 auto;
      text-align: center;
    }
    
    header {
      margin-bottom: 30px;
      padding: 25px;
      border-radius: 20px;
      background: rgba(15, 10, 30, 0.85);
      box-shadow: 0 0 30px rgba(106, 17, 203, 0.4);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(106, 17, 203, 0.3);
    }
    
    h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: 2.8rem;
      margin-bottom: 15px;
      position: relative;
      display: inline-block;
      background: linear-gradient(90deg, var(--accent), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 15px rgba(0, 242, 254, 0.3);
    }
    
    h1::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 10%;
      width: 80%;
      height: 3px;
      background: linear-gradient(90deg, transparent, var(--accent), transparent);
    }
    
    .tagline {
      font-size: 1.3rem;
      color: #b0c6ff;
      margin-bottom: 25px;
      line-height: 1.7;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }
    
    .features {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 25px;
      margin: 40px 0;
    }
    
    .feature {
      background: rgba(30, 30, 70, 0.7);
      border-radius: 15px;
      padding: 25px 20px;
      width: 240px;
      border: 1px solid rgba(100, 150, 255, 0.3);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    
    .feature:hover {
      transform: translateY(-8px);
      box-shadow: 0 10px 25px rgba(37, 117, 252, 0.5);
      background: rgba(40, 40, 90, 0.8);
    }
    
    .feature i {
      font-size: 3rem;
      color: var(--accent);
      margin-bottom: 20px;
      text-shadow: 0 0 10px rgba(0, 242, 254, 0.5);
    }
    
    .feature h3 {
      color: var(--secondary);
      margin-bottom: 15px;
      font-size: 1.4rem;
    }
    
    .feature p {
      font-size: 1.05rem;
      color: #d0e0ff;
    }
    
    .chat-section {
      max-width: 800px;
      margin: 50px auto;
      background: rgba(20, 15, 40, 0.92);
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 0 40px rgba(37, 117, 252, 0.25);
      border: 1px solid rgba(100, 150, 255, 0.2);
    }
    
    .chat-header {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 30px;
      gap: 20px;
    }
    
    .chat-header h2 {
      font-family: 'Orbitron', sans-serif;
      color: var(--accent);
      font-size: 2.2rem;
      text-shadow: 0 0 10px rgba(0, 242, 254, 0.6);
    }
    
    .avatar {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
      box-shadow: 0 0 15px rgba(106, 17, 203, 0.6);
    }
    
    #chatBox {
      height: 400px;
      overflow-y: auto;
      border: 1px solid rgba(100, 150, 255, 0.4);
      background: rgba(10, 5, 30, 0.7);
      padding: 20px;
      border-radius: 15px;
      margin-bottom: 25px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    .user-message, .bot-message {
      max-width: 85%;
      padding: 15px 20px;
      border-radius: 20px;
      position: relative;
      animation: fadeIn 0.4s ease-out;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(15px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .user-message {
      align-self: flex-end;
      background: linear-gradient(135deg, var(--primary), #8a2be2);
      border-bottom-right-radius: 5px;
      text-align: right;
    }
    
    .bot-message {
      align-self: flex-start;
      background: linear-gradient(135deg, #006c6e, var(--accent));
      border-bottom-left-radius: 5px;
      text-align: left;
    }
    
    .message-content {
      line-height: 1.7;
      font-size: 1.1rem;
    }
    
    .bot-message .message-content {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .bot-message .message-content p {
      margin-bottom: 10px;
    }
    
    .bot-message .message-content ul, 
    .bot-message .message-content ol {
      padding-left: 25px;
      margin: 10px 0;
    }
    
    .bot-message .message-content li {
      margin-bottom: 8px;
    }
    
    .input-area {
      display: flex;
      gap: 15px;
      position: relative;
    }
    
    #userInput {
      flex-grow: 1;
      padding: 15px 20px;
      border-radius: 30px;
      border: none;
      background: rgba(25, 20, 50, 0.9);
      color: var(--light);
      font-size: 1.1rem;
      border: 2px solid rgba(100, 150, 255, 0.4);
      transition: all 0.3s;
      box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.3);
    }
    
    #userInput:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 15px rgba(0, 242, 254, 0.6), inset 0 0 10px rgba(0, 0, 0, 0.3);
    }
    
    #sendBtn {
      background: linear-gradient(135deg, var(--primary), var(--accent));
      border: none;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      color: white;
      cursor: pointer;
      font-size: 1.4rem;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
      box-shadow: 0 5px 15px rgba(106, 17, 203, 0.5);
    }
    
    #sendBtn:hover {
      transform: scale(1.08);
      box-shadow: 0 0 20px rgba(0, 242, 254, 0.7);
    }
    
    #sendBtn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    
    footer {
      margin-top: 50px;
      padding: 25px;
      font-size: 1rem;
      color: #a0b0e0;
      border-top: 1px solid rgba(100, 150, 255, 0.3);
    }
    
    .typing-indicator {
      display: none;
      align-self: flex-start;
      background: rgba(40, 40, 90, 0.7);
      padding: 15px 25px;
      border-radius: 20px;
      border-bottom-left-radius: 5px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }
    
    .typing-dots {
      display: flex;
      gap: 8px;
    }
    
    .typing-dot {
      width: 10px;
      height: 10px;
      background: var(--accent);
      border-radius: 50%;
      animation: bounce 1.4s infinite ease-in-out;
      box-shadow: 0 0 5px rgba(0, 242, 254, 0.5);
    }
    
    .typing-dot:nth-child(1) { animation-delay: -0.32s; }
    .typing-dot:nth-child(2) { animation-delay: -0.16s; }
    
    @keyframes bounce {
      0%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
    }
    
    .ai-tag {
      display: inline-block;
      background: rgba(0, 242, 254, 0.2);
      color: var(--accent);
      font-size: 0.8rem;
      padding: 3px 8px;
      border-radius: 12px;
      margin-top: 10px;
      font-weight: bold;
    }
    
    .api-info {
      background: rgba(20, 30, 70, 0.5);
      padding: 15px;
      border-radius: 10px;
      margin-top: 15px;
      font-size: 0.9rem;
      border: 1px solid rgba(100, 150, 255, 0.3);
    }
    
    .api-info a {
      color: var(--accent);
      text-decoration: none;
    }
    
    .api-info a:hover {
      text-decoration: underline;
    }
    
    .history-controls {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
    }
    
    .history-btn {
      background: rgba(40, 40, 90, 0.7);
      color: var(--accent);
      border: 1px solid var(--accent);
      padding: 8px 15px;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .history-btn:hover {
      background: rgba(0, 242, 254, 0.2);
    }
    
    @media (max-width: 768px) {
      h1 {
        font-size: 2.2rem;
      }
      
      .tagline {
        font-size: 1.1rem;
      }
      
      .feature {
        width: 100%;
        max-width: 320px;
      }
      
      .chat-section {
        padding: 20px;
      }
      
      #chatBox {
        height: 350px;
        padding: 15px;
      }
      
      .user-message, .bot-message {
        max-width: 90%;
        padding: 12px 16px;
      }
      
      .chat-header h2 {
        font-size: 1.8rem;
      }
      
      #userInput {
        padding: 12px 18px;
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <div class="overlay">
    <header>
      <h1><i class="fas fa-brain"></i> Oban AI Ultimate</h1>
      <p class="tagline">OBAN AI dengan DeepSeek API gratis + fitur lanjutan. Bertanya apa saja - dari koding sampai filosofi!</p>
      
      <div class="features">
        <div class="feature">
          <i class="fas fa-bolt"></i>
          <h3>DeepSeek Gratis</h3>
          <p>Model DeepSeek-R1 128K context gratis</p>
        </div>
        <div class="feature">
          <i class="fas fa-code"></i>
          <h3>Pemrograman Pro</h3>
          <p>Bantu debug, optimasi, dan jelaskan kode</p>
        </div>
        <div class="feature">
          <i class="fas fa-history"></i>
          <h3>Riwayat Chat</h3>
          <p>Simpan dan muat percakapan</p>
        </div>
      </div>
      
      <div class="api-info">
        <p><i class="fas fa-key"></i> Dapatkan API key gratis di <a href="https://platform.deepseek.com/" target="_blank">platform.deepseek.com</a></p>
      </div>
    </header>
    
    <div class="chat-section">
      <div class="chat-header">
        <div class="avatar">
          <i class="fas fa-robot"></i>
        </div>
        <h2>Chat dengan Oban AI</h2>
      </div>
      
      <div id="chatBox">
        <!-- Chat messages will appear here -->
      </div>
      
      <div class="history-controls">
        <button class="history-btn" id="saveBtn"><i class="fas fa-save"></i> Simpan Chat</button>
        <button class="history-btn" id="clearBtn"><i class="fas fa-trash"></i> Hapus Chat</button>
        <button class="history-btn" id="exportBtn"><i class="fas fa-download"></i> Ekspor Chat</button>
      </div>
      
      <div class="input-area">
        <input type="text" id="userInput" placeholder="Tanya apa saja kepada Oban AI...">
        <button id="sendBtn"><i class="fas fa-paper-plane"></i></button>
      </div>
    </div>
    
    <footer>
      <p>© 2023 Oban AI Assistant | Powered by DeepSeek API | Versi 4.0</p>
      <p class="ai-tag">Model: DeepSeek-R1 (128K context) | Status: <span id="apiStatus">API Key Belum Diatur</span></p>
    </footer>
  </div>

  <script>
    // ================ KONFIGURASI UTAMA ================
    const chatBox = document.getElementById("chatBox");
    const userInput = document.getElementById("userInput");
    const sendBtn = document.getElementById("sendBtn");
    const saveBtn = document.getElementById("saveBtn");
    const clearBtn = document.getElementById("clearBtn");
    const exportBtn = document.getElementById("exportBtn");
    const apiStatus = document.getElementById("apiStatus");
    
    // DeepSeek API configuration
    const DEEPSEEK_API_KEY = ""; // Isi dengan API key Anda
    const DEEPSEEK_API_URL = "https://api.deepseek.com/chat/completions";
    const DEEPSEEK_MODEL = "deepseek-chat";
    
    // ================ INISIALISASI ================
    // Create typing indicator
    const typingIndicator = document.createElement("div");
    typingIndicator.className = "typing-indicator";
    typingIndicator.innerHTML = `
      <div class="typing-dots">
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
      </div>
    `;
    
    // Initial bot message
    window.onload = function() {
      // Periksa API key
      updateApiStatus();
      
      // Muat riwayat chat jika ada
      loadChatHistory();
      
      // Kirim pesan pembuka jika chat kosong
      if (chatBox.children.length === 0) {
        setTimeout(() => {
          addBotMessage("Halo! Saya Oban AI 🤖, didukung oleh DeepSeek API gratis. Saya siap membantu Anda dengan berbagai topik seperti pemrograman, sains, matematika, dan banyak lagi. Apa yang ingin Anda pelajari hari ini?");
        }, 1000);
      }
    };
    
    // Perbarui status API
    function updateApiStatus() {
      if (sk-098628e3d9b44abda75541a60f617e22) {
        apiStatus.textContent = "API Key Aktif";
        apiStatus.style.color = "#00ff00";
      } else {
        apiStatus.textContent = "API Key Belum Diatur";
        apiStatus.style.color = "#ff5252";
      }
    }
    
    // ================ EVENT LISTENERS ================
    // Send message on button click
    sendBtn.addEventListener("click", sendMessage);
    
    // Send message on Enter key
    userInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") sendMessage();
    });
    
    // Tombol riwayat chat
    saveBtn.addEventListener("click", saveChatHistory);
    clearBtn.addEventListener("click", clearChatHistory);
    exportBtn.addEventListener("click", exportChatHistory);
    
    // ================ FUNGSI CHAT ================
    // Add message to chat
    function addMessage(sender, text, isUser = false) {
      const messageDiv = document.createElement("div");
      messageDiv.className = isUser ? "user-message" : "bot-message";
      
      const content = document.createElement("div");
      content.className = "message-content";
      content.innerHTML = `<strong>${isUser ? '🧠 Anda' : '🤖 Oban AI'}:</strong> ${text}`;
      
      messageDiv.appendChild(content);
      chatBox.appendChild(messageDiv);
      
      // Scroll to bottom
      chatBox.scrollTop = chatBox.scrollHeight;
      
      // Simpan riwayat
      saveChatHistory();
    }
    
    // Add bot message
    function addBotMessage(text) {
      // Remove typing indicator if exists
      if (chatBox.contains(typingIndicator)) {
        chatBox.removeChild(typingIndicator);
      }
      
      const messageDiv = document.createElement("div");
      messageDiv.className = "bot-message";
      
      const content = document.createElement("div");
      content.className = "message-content";
      content.innerHTML = `<strong>🤖 Oban AI:</strong> ${text}`;
      
      messageDiv.appendChild(content);
      chatBox.appendChild(messageDiv);
      
      // Scroll to bottom
      chatBox.scrollTop = chatBox.scrollHeight;
      
      // Simpan riwayat
      saveChatHistory();
    }
    
    // Show typing indicator
    function showTypingIndicator() {
      chatBox.appendChild(typingIndicator);
      typingIndicator.style.display = "block";
      chatBox.scrollTop = chatBox.scrollHeight;
    }
    
    // Hide typing indicator
    function hideTypingIndicator() {
      typingIndicator.style.display = "none";
    }
    
    // ================ DEEPSEEK API ================
    // Get response from DeepSeek API
    async function getDeepSeekResponse(prompt) {
      if (!DEEPSEEK_API_KEY) {
        return "⚠️ Error: API key DeepSeek belum diatur. Silakan dapatkan API key gratis di platform.deepseek.com dan tambahkan di kode JavaScript (variabel DEEPSEEK_API_KEY).";
      }
      
      try {
        const response = await fetch(DEEPSEEK_API_URL, {
          method: "POST",
          headers: {
            "Authorization": `Bearer ${DEEPSEEK_API_KEY}`,
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            model: DEEPSEEK_MODEL,
            messages: [
              {
                role: "system",
                content: "Anda adalah Oban AI, asisten AI yang membantu dan informatif. Berikan jawaban yang jelas, terstruktur, dan ramah pengguna. Gunakan format Markdown untuk kode dan poin-poin penting."
              },
              {
                role: "user",
                content: prompt
              }
            ],
            temperature: 0.7,
            max_tokens: 2000,
            stream: false
          })
        });
        
        if (!response.ok) {
          const errorData = await response.json();
          throw new Error(`API Error: ${errorData.error?.message || response.statusText}`);
        }
        
        const data = await response.json();
        return data.choices[0].message.content;
      } catch (error) {
        console.error("DeepSeek API Error:", error);
        return `❌ Maaf, terjadi kesalahan: ${error.message}. Pastikan API key valid dan koneksi internet stabil.`;
      }
    }
    
    // ================ MANAJEMEN RIWAYAT ================
    // Simpan riwayat chat ke localStorage
    function saveChatHistory() {
      const messages = [];
      document.querySelectorAll('#chatBox > div').forEach(msg => {
        messages.push({
          type: msg.classList.contains('user-message') ? 'user' : 'bot',
          text: msg.querySelector('.message-content').innerHTML
        });
      });
      localStorage.setItem('oban_chat_history', JSON.stringify(messages));
    }
    
    // Muat riwayat chat dari localStorage
    function loadChatHistory() {
      const history = JSON.parse(localStorage.getItem('oban_chat_history') || '[]');
      history.forEach(msg => {
        if (msg.type === 'user') {
          const messageDiv = document.createElement("div");
          messageDiv.className = "user-message";
          messageDiv.innerHTML = `<div class="message-content">${msg.text}</div>`;
          chatBox.appendChild(messageDiv);
        } else {
          const messageDiv = document.createElement("div");
          messageDiv.className = "bot-message";
          messageDiv.innerHTML = `<div class="message-content">${msg.text}</div>`;
          chatBox.appendChild(messageDiv);
        }
      });
      
      // Scroll ke bawah
      if (history.length > 0) {
        chatBox.scrollTop = chatBox.scrollHeight;
      }
    }
    
    // Hapus riwayat chat
    function clearChatHistory() {
      if (confirm("Apakah Anda yakin ingin menghapus semua riwayat chat?")) {
        localStorage.removeItem('oban_chat_history');
        chatBox.innerHTML = '';
        addBotMessage("Riwayat chat telah dihapus. Mulai percakapan baru!");
      }
    }
    
    // Ekspor riwayat chat sebagai file teks
    function exportChatHistory() {
      const messages = [];
      document.querySelectorAll('#chatBox > div').forEach(msg => {
        const sender = msg.classList.contains('user-message') ? 'Anda' : 'Oban AI';
        const text = msg.querySelector('.message-content').textContent.replace(`${sender}: `, '');
        messages.push(`${sender}: ${text}`);
      });
      
      const chatText = messages.join('\n\n');
      const blob = new Blob([chatText], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      
      const a = document.createElement('a');
      a.href = url;
      a.download = 'oban-ai-chat-history.txt';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      
      addBotMessage("Riwayat chat telah diekspor sebagai file teks!");
    }
    
    // ================ FUNGSI UTAMA ================
    // Send message function
    async function sendMessage() {
      const text = userInput.value.trim();
      if (!text) return;
      
      // Add user message
      addMessage("Anda", text, true);
      userInput.value = "";
      
      // Disable send button while processing
      sendBtn.disabled = true;
      sendBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
      
      // Show typing indicator
      showTypingIndicator();
      
      try {
        const aiResponse = await getDeepSeekResponse(text);
        hideTypingIndicator();
        addBotMessage(aiResponse);
      } catch (error) {
        hideTypingIndicator();
        addBotMessage(`❌ Error: ${error.message || "Terjadi kesalahan saat memproses permintaan."}`);
      } finally {
        // Re-enable send button
        sendBtn.disabled = false;
        sendBtn.innerHTML = '<i class="fas fa-paper-plane"></i>';
      }
    }
  </script>
</body>
</html>
